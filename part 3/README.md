# Part 3

This part include 
- Admin INTERFACE
- Forms
- CBV
- Postgresql with Django
- User Management

## First course : Admin interface
```
admin.py
from django.contrib import admin
from Article.models import article

admin.site.register(article)
```
or we can create a class that inherits from admin.ModelAdmin and use the admin.register decorator

```
from django.contrib import admin
from Article.models import article

@admin.register(article)
class articleAdmin(admin.ModelAdmin):
    pass
```
to change the name we can add the function ````__str__````

**To Specify the fields to display**
```
list_display = ("title", "category", "date")
```
to show null value fields we can add
```
empty_value_display = "unknown"
```

for the fields to change the value
```
list_editable = ("published", )
```
**Access a page on the site**
```
def get_absolute_url(self):
    return reverse("article", kwargs={"slug": self.slug})
```

Filter instances
```
search_fields = ("title", )
list_filter = ("published", )
```

Limit the number of instances
We display 15 instances per page
```
    list_display = ("title", "date")
    list_per_page = 15
```
## Second course: Forms
Create a form
```
from django import forms
class SignupForm(forms.Form):
    pseudo = forms.CharField(max_length=12, required=False)
    email = forms.EmailField()
    password = forms.CharField(min_length=6)
```
Create an instance of this class to create a form. If you print this instance, you will see the HTML code generated by the form.
```
form = SignupForm()
```
form linked to a model
create a linked form (to a model) we use the ModelForm lass of the forms module.
```
class SignupForm(forms.ModelForm):
    class Meta:
        model = BlogPost
        fields = ("title", "user", "date", )
```
You can choose instead of the fields attribute to use the exclude attribute
```
 model = Article
        exclude = ("slug", )  # we include all the fields except the slug.
```
To include all fields
```
fields = "__all__"
```
To change labels
```
label={
    "label_name": "new name"
}
```

to add widgets
```
widgets = {}
```
TO register
```
form.save() 
```
Enter default values
```
form = SignupForm(initial={"email": "hello@dohotmal.com"})
```
## Third part :Postgresql with Django
install psycopg2
```
pip  install  psycopg
```
To check
```
pip  list
```
Create user 

in cmd 
connect  to  psql
commande line 
```
CREATE USER [USER NAME] WITH ENCRYPTED PASSWORD ['PASSWORD'];
```
To check
```
\du
```
commande to modify previleges 
```
ALTER ROLE [name] SET TO  client_encoding TO 'utf8';

ALTER ROLE [name user] SET  default_transaction TO 'read committed';
```
list all the DATAbases:
```
\l
```
Database creation
```
CREATE DATABASE [nom de la base de donée] IF NOT EXIST;
```
Give permission to the new user

```
GRANT ALL PRIVILEGES ON [nom de la base de donnée] TO [ user name]

```
connect database to django

```
in file settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'Name of the data base',
        'USER': 'username',
        'PASSWORD': 'password',
        'HOST': 'localhost',
        'PORT': '5432', (if it not changed)
    }
}

```